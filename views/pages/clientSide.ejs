<%- include('../partials/header')%>

<body>
  <div id="main-wrapper" data-layout="vertical" data-navbarbg="skin5" data-sidebartype="full"
    data-sidebar-position="absolute" data-header-position="absolute" data-boxed-layout="full">

    <!-- Page Content -->
    <div class="page-wrapper">
      <div class="container-fluid py-5">

        <h2 class="mb-4 text-center fw-bold">Our Products</h2>

        <div class="row g-4">
          <% products.forEach(product => { %>
          <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12">
            <div class="card product-card h-100 border-0 shadow-sm">

              <!-- Product Image -->
              <div class="product-img-container">
                <img src="/<%= product.image %>" class="product-img" alt="<%= product.title %>">
              </div>

              <!-- Product Body -->
              <div class="card-body d-flex flex-column">
                <!-- Title -->
                <h6 class="card-title text-truncate mb-2"><%= product.title %></h6>

                <!-- Price -->
                <p class="price-tag mb-2">â‚¹ <%= product.price %></p>

                <!-- Short Description -->
                <p class="product-description mb-3"><%= product.description %></p>

                <!-- Categories -->
                <div class="mt-auto text-start">
                  <% if(product.category) { %>
                    <span class="category-label">Category:</span>
                    <span class="badge bg-primary"><%= product.category.name %></span><br>
                  <% } %>
                  <% if(product.subCategory) { %>
                    <span class="category-label">Subcategory:</span>
                    <span class="badge bg-success"><%= product.subCategory.name %></span><br>
                  <% } %>
                  <% if(product.extraCategory) { %>
                    <span class="category-label">Extra:</span>
                    <span class="badge bg-warning text-dark"><%= product.extraCategory.name %></span>
                  <% } %>
                </div>
              </div>

              <!-- Footer Buttons -->
              <div class="card-footer bg-white border-0 text-center pb-3">
                <a href="/product/<%= product._id %>" class="btn btn-primary btn-sm btn-details me-2">
                  View Details
                </a>
                <a href="/cart/add/<%= product._id %>" class="btn btn-outline-success btn-sm">
                  <i class="mdi mdi-cart"></i> Add to Cart
                </a>
              </div>

            </div>
          </div>
          <% }) %>
        </div>
      </div>
    </div>
</body>

<%- include('../partials/footer')%>

<style>
  .product-card {
    border-radius: 12px;
    overflow: hidden;
    transition: transform 0.3s, box-shadow 0.3s;
    background: #fff;
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  .product-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
  }

  /* Image section */
  .product-img-container {
    height: 200px; /* Smaller height for neat look */
    overflow: hidden;
    border-bottom: 1px solid #f0f0f0;
  }

  .product-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.4s ease;
  }

  .product-img-container:hover .product-img {
    transform: scale(1.08);
  }

  /* Card body */
  .card-body {
    flex: 1;
    padding: 1rem;
    display: flex;
    flex-direction: column;
  }

  .card-title {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 0.4rem;
    color: #212529;
  }

  .price-tag {
    font-size: 1.1rem;
    font-weight: 700;
    color: #dc3545;
    margin-bottom: 0.6rem;
  }

  /* Description truncate to 2 lines */
  .product-description {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    overflow: hidden;
    font-size: 0.9rem;
    color: #6c757d;
    margin-bottom: 0.8rem;
  }

  /* Category labels */
  .category-label {
    font-weight: 600;
    margin-right: 5px;
    color: #495057;
  }

  .badge {
    font-size: 0.75rem;
    margin: 2px 0;
  }

  /* Footer */
  .card-footer {
    border-top: 1px solid #f1f1f1;
    background: #fff;
    padding: 0.75rem;
  }

  .btn-details {
    border-radius: 50px;
    padding: 0.35rem 1rem;
    font-weight: 500;
  }
</style>

